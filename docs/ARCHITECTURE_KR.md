# ì´ë²¤íŠ¸ íŠ¸ë˜í‚¹ ë°ì´í„° ìƒì„±ê¸° - ì•„í‚¤í…ì²˜ ë¬¸ì„œ

## ê°œìš”

AI ê¸°ë°˜ìœ¼ë¡œ Excel ìŠ¤í‚¤ë§ˆë¥¼ ìƒì„±í•˜ê±°ë‚˜ ê¸°ì¡´ Excel íŒŒì¼ì„ ì—…ë¡œë“œí•˜ì—¬ í˜„ì‹¤ì ì¸ ì„œë¹„ìŠ¤ ì´ë²¤íŠ¸ ë°ì´í„°ë¥¼ ìƒì„±í•˜ê³  LogBus2ë¡œ ThinkingEngineì— ì „ì†¡í•˜ëŠ” í†µí•© ì‹œìŠ¤í…œì…ë‹ˆë‹¤.

**í•µì‹¬ íŠ¹ì§•**:
- **ë‘ ê°€ì§€ ì‹œì‘ ëª¨ë“œ**: Excel ìë™ ìƒì„± ë˜ëŠ” ê¸°ì¡´ íŒŒì¼ ì—…ë¡œë“œ
- **AI ê¸°ë°˜ ìŠ¤í‚¤ë§ˆ ìƒì„±**: ì„œë¹„ìŠ¤ ì •ë³´ë§Œìœ¼ë¡œ Excel ìŠ¤í‚¤ë§ˆ ìë™ ìƒì„±
- **ìœ ì € ìƒëª…ì£¼ê¸° ê¸°ë°˜**: í˜„ì‹¤ì ì¸ ì´ë²¤íŠ¸ ìƒì„±
- **ì¼ìë³„ JSONL ë¶„ë¦¬**: ë‚ ì§œë³„ íŒŒì¼ë¡œ ë¶„ë¦¬ ì €ì¥
- **LogBus2 í†µí•©**: Gzip ì••ì¶• ì „ì†¡ìœ¼ë¡œ ìµœì í™”
- **Excel ë‹¤ìš´ë¡œë“œ**: ìƒì„±ëœ ìŠ¤í‚¤ë§ˆ íŒŒì¼ ë‹¤ìš´ë¡œë“œ ê°€ëŠ¥
- **ìœ ì—°í•œ ë„¤ë¹„ê²Œì´ì…˜**: ê° ë‹¨ê³„ì—ì„œ í™ˆìœ¼ë¡œ ëŒì•„ê°€ê¸° ê°€ëŠ¥

## ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### ì „ì²´ íë¦„ë„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    í”„ë¡ íŠ¸ì—”ë“œ (Next.js 14)                       â”‚
â”‚                      http://localhost:3000                       â”‚
â”‚                                                                  â”‚
â”‚  [í™ˆ í™”ë©´] - ì‹œì‘ ëª¨ë“œ ì„ íƒ                                     â”‚
â”‚                                                                  â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚     â”‚   ğŸ†• ìƒˆë¡œ ë§Œë“¤ê¸° â”‚         â”‚  ğŸ“ ê¸°ì¡´ ì—‘ì…€    â”‚          â”‚
â”‚     â”‚                  â”‚         â”‚     ì‚¬ìš©í•˜ê¸°      â”‚          â”‚
â”‚     â”‚ 1. ì •ë³´ ì…ë ¥     â”‚         â”‚                  â”‚          â”‚
â”‚     â”‚ 2. Excel ìƒì„±    â”‚         â”‚ 1. íŒŒì¼ ì—…ë¡œë“œ   â”‚          â”‚
â”‚     â”‚ 3. ë°ì´í„° ìƒì„±   â”‚         â”‚ 2. ì„¤ì • ì…ë ¥     â”‚          â”‚
â”‚     â”‚ 4. ì „ì†¡          â”‚         â”‚ 3. ë°ì´í„° ìƒì„±   â”‚          â”‚
â”‚     â”‚                  â”‚         â”‚ 4. ì „ì†¡          â”‚          â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚              â”‚                            â”‚                      â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                           â”‚                                      â”‚
â”‚            [ê° ë‹¨ê³„ì—ì„œ ğŸ  í™ˆìœ¼ë¡œ ëŒì•„ê°€ê¸° ê°€ëŠ¥]                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    API ì„œë²„ (Express)                            â”‚
â”‚                     http://localhost:3001                        â”‚
â”‚                                                                  â”‚
â”‚  API ì—”ë“œí¬ì¸íŠ¸:                                                 â”‚
â”‚  â€¢ GET  /api/settings                  ì„¤ì • ì¡°íšŒ                â”‚
â”‚  â€¢ POST /api/settings                  ì„¤ì • ì €ì¥                â”‚
â”‚  â€¢ GET  /api/excel/list                Excel ëª©ë¡               â”‚
â”‚  â€¢ GET  /api/excel/download/:filename  Excel ë‹¤ìš´ë¡œë“œ          â”‚
â”‚  â€¢ POST /api/excel/upload              Excel ì—…ë¡œë“œ             â”‚
â”‚  â€¢ POST /api/excel/parse               Excel íŒŒì‹±               â”‚
â”‚  â€¢ POST /api/generate/start            ë°ì´í„° ìƒì„± ì‹œì‘         â”‚
â”‚  â€¢ GET  /api/generate/status/:runId    ì§„í–‰ ìƒíƒœ í´ë§          â”‚
â”‚  â€¢ POST /api/send-data/:runId          ThinkingEngine ì „ì†¡     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ë°ì´í„° ìƒì„± ì—”ì§„                              â”‚
â”‚                                                                  â”‚
â”‚  1. Excel íŒŒì‹± â†’ ìŠ¤í‚¤ë§ˆ ì¶”ì¶œ                                    â”‚
â”‚  2. AI ë¶„ì„ â†’ ì´ë²¤íŠ¸ ì˜ì¡´ì„±, ë°ì´í„° ë²”ìœ„ ìƒì„±                   â”‚
â”‚  3. ìœ ì € ì½”í˜¸íŠ¸ ìƒì„± â†’ ì„¸ê·¸ë¨¼íŠ¸ë³„ ìœ ì € í’€                       â”‚
â”‚  4. ì¼ìë³„ ì´ë²¤íŠ¸ ìƒì„± â†’ JSONL íŒŒì¼ ì €ì¥                        â”‚
â”‚                                                                  â”‚
â”‚  ì¶œë ¥: output/data/run_XXX/*.jsonl                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    LogBus2 í†µí•© ë ˆì´ì–´                           â”‚
â”‚                                                                  â”‚
â”‚  1. daemon.json ìë™ ìƒì„± (gzip ì••ì¶• ì„¤ì •)                      â”‚
â”‚  2. LogBus2 í”„ë¡œì„¸ìŠ¤ ì‹œì‘                                        â”‚
â”‚  3. ë‚ ì§œìˆœ íŒŒì¼ ì „ì†¡ (2025-01-01.jsonl â†’ 01-02 â†’ ...)          â”‚
â”‚  4. ì§„í–‰ ìƒíƒœ ëª¨ë‹ˆí„°ë§ (ì—…ë¡œë“œ íŒŒì¼ ìˆ˜/ì „ì²´ íŒŒì¼)               â”‚
â”‚  5. ì „ì†¡ ì™„ë£Œ í›„ LogBus2 ì¢…ë£Œ                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               ThinkingEngine Receiver                            â”‚
â”‚         https://te-receiver-naver.thinkingdata.kr/               â”‚
â”‚                                                                  â”‚
â”‚  â€¢ Gzip ì••ì¶• ë°ì´í„° ìˆ˜ì‹                                          â”‚
â”‚  â€¢ ì´ë²¤íŠ¸ ì €ì¥ ë° ë¶„ì„                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ëª¨ë“œë³„ ìƒì„¸ íë¦„

#### ëª¨ë“œ 1: ìƒˆë¡œ ë§Œë“¤ê¸° (Excel ìë™ ìƒì„±)

```
[í™ˆ] â†’ [ì •ë³´ ì…ë ¥]
         â†“
      ì‹œë‚˜ë¦¬ì˜¤, DAU, ì‚°ì—…, ì„œë¹„ìŠ¤ íŠ¹ì§• ì…ë ¥
         â†“
    [Excel ìƒì„± ì‹œì‘] â† ğŸ  í™ˆ
         â†“
    AIê°€ Excel ìŠ¤í‚¤ë§ˆ ìë™ ìƒì„±
    (excel-schema-generator/output/)
         â†“
    [Excel ìƒì„± ì™„ë£Œ] â† ğŸ  í™ˆ
         â†“
    [ğŸ“¥ Excel ë‹¤ìš´ë¡œë“œ] ë˜ëŠ” [ë°ì´í„° ìƒì„± ì‹œì‘]
         â†“
      DAU, ë‚ ì§œ ë²”ìœ„ ì…ë ¥
         â†“
    [ë°ì´í„° ìƒì„± ì¤‘]
         â†“
    [ë°ì´í„° ìƒì„± ì™„ë£Œ] â† ğŸ  í™ˆ
         â†“
    [ThinkingEngine ì „ì†¡]
         â†“
    [ì „ì†¡ ì™„ë£Œ] â†’ ğŸ  ìƒˆë¡œìš´ ìƒì„± ì‹œì‘
```

#### ëª¨ë“œ 2: ê¸°ì¡´ ì—‘ì…€ ì‚¬ìš©í•˜ê¸°

```
[í™ˆ] â†’ [Excel ì—…ë¡œë“œ]
         â†“
      íŒŒì¼ ì„ íƒ (ë“œë˜ê·¸ ì•¤ ë“œë¡­)
         â†“
    [ì—…ë¡œë“œ ì™„ë£Œ] â† ğŸ  í™ˆ
         â†“
      íŒŒì¼ ì •ë³´ í™•ì¸ (ì´ë²¤íŠ¸/ì†ì„± ìˆ˜)
         â†“
    [ì„œë¹„ìŠ¤ ì •ë³´ ë° ì„¤ì • ì…ë ¥] â† ğŸ  í™ˆ
         â†“
      ì‹œë‚˜ë¦¬ì˜¤, DAU, ì‚°ì—…, ë‚ ì§œ ë²”ìœ„ ì…ë ¥
         â†“
    [ë°ì´í„° ìƒì„± ì‹œì‘]
         â†“
    [ë°ì´í„° ìƒì„± ì¤‘]
         â†“
    [ë°ì´í„° ìƒì„± ì™„ë£Œ] â† ğŸ  í™ˆ
         â†“
    [ThinkingEngine ì „ì†¡]
         â†“
    [ì „ì†¡ ì™„ë£Œ] â†’ ğŸ  ìƒˆë¡œìš´ ìƒì„± ì‹œì‘
```

## í•µì‹¬ ë¼ì´ë¸ŒëŸ¬ë¦¬

### Faker.js í™œìš©
- **@faker-js/faker** - í˜„ì‹¤ì ì¸ ë”ë¯¸ ë°ì´í„° ìƒì„±
- êµ­ê°€ë³„ ë¡œì¼€ì¼ ì§€ì› (ja, ko, en, zh_CN, zh_TW ë“±)
- ìœ ì €ëª…, ì£¼ì†Œ, ì „í™”ë²ˆí˜¸, ìƒí’ˆëª… ë“± ìë™ ìƒì„±
- êµ­ê°€ë³„ IP ëŒ€ì—­, í†µì‹ ì‚¬, ë””ë°”ì´ìŠ¤ ëª¨ë¸ ë“±

## í•µì‹¬ ì»´í¬ë„ŒíŠ¸

### 1. Excel íŒŒì¼ ë¦¬ë” (ë¸Œë¼ìš°ì €)

**ëª©ì **: ì™¸ë¶€ í”„ë¡œê·¸ë¨ì´ ìƒì„±í•œ Excel íŒŒì¼ ì½ê¸°

**ì…ë ¥**:
- excel-schema-generator/output/ í´ë”ì˜ Excel íŒŒì¼
- ë˜ëŠ” íŒŒì¼ ì„ íƒ UIë¥¼ í†µí•œ ì—…ë¡œë“œ

**ì¶œë ¥**:
- ParsedSchema ê°ì²´ (ì´ë²¤íŠ¸, ì†ì„±, í¼ë„, ìœ ì € ì„¸ê·¸ë¨¼íŠ¸)

**Excel êµ¬ì¡° (ì½ê¸° ì „ìš© - ì™¸ë¶€ í”„ë¡œê·¸ë¨ì´ ìƒì„±):**
```
ğŸ“‹ Sheet 1: Events (ì´ë²¤íŠ¸ ì •ì˜)
- event_name: ì´ë²¤íŠ¸ ì‹ë³„ì
- event_name_kr: í•œêµ­ì–´ëª…
- category: system, transaction, interaction ë“±
- required_previous_events: ì„ í–‰ ì´ë²¤íŠ¸ (ì‰¼í‘œ êµ¬ë¶„)
- user_lifecycle_stage: new, active, returning, churned
- trigger_probability: ë°œìƒ í™•ë¥  (0-1)

ğŸ“‹ Sheet 2: Properties (ì†ì„± ì •ì˜)
- property_name: ì†ì„± í‚¤
- data_type: string, number, boolean, time
- applies_to_events: ì ìš© ì´ë²¤íŠ¸ ëª©ë¡
- example_values: ì˜ˆì‹œ ê°’

ğŸ“‹ Sheet 3: User_Segments (ìœ ì € ì„¸ê·¸ë¨¼íŠ¸)
- segment_name: whale, regular, casual
- percentage: ì „ì²´ ìœ ì € ì¤‘ ë¹„ìœ¨
- avg_sessions_per_day: ì¼í‰ê·  ì„¸ì…˜ ìˆ˜
- avg_session_duration_min: í‰ê·  ì„¸ì…˜ ê¸¸ì´
- retention_rate_d1, d7, d30: ë¦¬í…ì…˜ìœ¨

ğŸ“‹ Sheet 4: Funnels (í¼ë„ ì •ì˜)
- funnel_name: í¼ë„ ì‹ë³„ì
- step_order: ë‹¨ê³„ ìˆœì„œ
- event_name: ë‹¨ê³„ë³„ ì´ë²¤íŠ¸
- dropout_rate: ì´íƒˆë¥ 
- avg_time_to_next_sec: ë‹¤ìŒ ë‹¨ê³„ê¹Œì§€ ì‹œê°„

ğŸ“‹ Sheet 5: Event_Dependencies (ì´ë²¤íŠ¸ ì˜ì¡´ì„±)
- event_name: ì´ë²¤íŠ¸
- must_happen_after: ë°˜ë“œì‹œ ì´í›„ì— ë°œìƒí•´ì•¼ í•˜ëŠ” ì´ë²¤íŠ¸ ëª©ë¡
- cannot_happen_with: ë™ì‹œ ë°œìƒ ë¶ˆê°€ ì´ë²¤íŠ¸
```

**ì¶œë ¥**:
```typescript
interface ParsedSchema {
  events: Event[];
  properties: Property[];
  userSegments: UserSegment[];
  funnels: Funnel[];
  eventDependencyGraph: DependencyGraph; // ì´ë²¤íŠ¸ ìˆœì„œ ë³´ì¥ìš©
}
```

### 2. ìœ ì € ì½”í˜¸íŠ¸ ìƒì„±ê¸° (Faker.js í†µí•©)

**ëª©ì **: ë‚ ì§œë³„ ì‹ ê·œ ìœ ì € ìƒì„± ë° ê¸°ì¡´ ìœ ì € ìƒëª…ì£¼ê¸° ê´€ë¦¬

**ì…ë ¥**:
- ì‹œë®¬ë ˆì´ì…˜ ë‚ ì§œ ë²”ìœ„ (ì˜ˆ: 2025-01-01 ~ 2025-01-30)
- DAU (Daily Active Users)
- AIê°€ ê²°ì •í•œ ìœ ì € ì„¸ê·¸ë¨¼íŠ¸ ë¹„ìœ¨
- **êµ­ê°€ë³„ ìœ ì € ë¶„í¬** (ê¸°ë³¸ê°’: JP 30%, KR 25%, US 20%, CN 15%, TW 10%)

**ì½”í˜¸íŠ¸ ìƒì„± ë¡œì§**:
```typescript
function generateUserCohorts(
  dateRange: DateRange,
  dailyActiveUsers: number,
  newUserRatio: number
): Map<string, User[]> {
  const cohorts = new Map();
  const userPool: User[] = []; // ì „ì²´ ìœ ì € í’€

  for (const date of dateRange) {
    const newUserCount = Math.floor(dailyActiveUsers * newUserRatio);
    const returningUserCount = dailyActiveUsers - newUserCount;

    // 1. ì‹ ê·œ ìœ ì € ìƒì„± (ì„¤ì¹˜ì¼ = ì˜¤ëŠ˜)
    const newUsers = createNewUsers(newUserCount, date);
    userPool.push(...newUsers);

    // 2. ê¸°ì¡´ ìœ ì € ì¤‘ í™œì„±í™”ë  ìœ ì € ì„ íƒ
    const activeUsers = selectActiveUsers(
      userPool.filter(u => u.installDate < date),
      returningUserCount,
      date
    );

    // 3. í•´ë‹¹ ë‚ ì§œì˜ ì „ì²´ í™œì„± ìœ ì €
    cohorts.set(date, [...newUsers, ...activeUsers]);
  }

  return cohorts;
}
```

**ìœ ì € ìƒëª…ì£¼ê¸° ìƒíƒœ (Faker.js í†µí•©)**:
```typescript
interface User {
  id: string;
  installDate: Date;           // ì„¤ì¹˜ì¼
  lastActiveDate: Date;         // ë§ˆì§€ë§‰ í™œì„± ë‚ ì§œ
  lifecycleStage: 'new' | 'active' | 'returning' | 'dormant' | 'churned';
  segment: string;              // AI ê²°ì • ì„¸ê·¸ë¨¼íŠ¸

  // Faker.js ìƒì„± - êµ­ê°€ë³„ í˜„ì‹¤ì  ë°ì´í„°
  country: string;              // "ì¼ë³¸", "ëŒ€í•œë¯¼êµ­" ë“±
  countryCode: string;          // "JP", "KR" ë“±
  locale: string;               // "ja", "ko" (Faker.js ë¡œì¼€ì¼)
  name: string;                 // Faker.js person.fullName() with locale (ì¼ë³¸ì´ë©´ ì¼ë³¸ì–´ ì´ë¦„)
  email: string;                // Faker.js internet.email()
  phone: string;                // Faker.js phone.number() with locale
  deviceModel: string;          // Faker.js phone.model()

  sessionHistory: Session[];    // ì„¸ì…˜ ì´ë ¥
  completedEvents: Set<string>; // ì™„ë£Œí•œ ì´ë²¤íŠ¸ ëª©ë¡ (ì˜ì¡´ì„± ì²´í¬ìš©)
  currentLevel: number;
  totalUsageTime: number;
}
```

### 3. ì¼ìë³„ ì´ë²¤íŠ¸ ìƒì„±ê¸° (Faker.js + AI ê²°í•©)

**ëª©ì **: ê° ë‚ ì§œë³„ë¡œ í˜„ì‹¤ì ì¸ ì´ë²¤íŠ¸ ì‹œí€€ìŠ¤ ìƒì„±

**ë°ì´í„° ìƒì„± ìš°ì„ ìˆœìœ„**:
1. **AI ì •ì˜ ë²”ìœ„ ìš°ì„ ** - AIê°€ ë¶„ì„í•œ ë°ì´í„° ë²”ìœ„ ì‚¬ìš©
2. **Faker.js í´ë°±** - AI ë²”ìœ„ ì—†ì„ ì‹œ ì†ì„± ì´ë¦„ ê¸°ë°˜ Faker.js ìƒì„±
3. **êµ­ê°€ë³„ ë¡œì¼€ì¼** - ìœ ì € êµ­ê°€ì— ë§ëŠ” Faker ë¡œì¼€ì¼ ì‚¬ìš©

**í”„ë¡œì„¸ìŠ¤**:

```typescript
async function generateDailyEvents(
  date: Date,
  activeUsers: User[],
  schema: ParsedSchema,
  aiRanges: DataRanges
): Promise<TEEvent[]> {
  const dailyEvents: TEEvent[] = [];

  for (const user of activeUsers) {
    // 1. ìœ ì € ìƒëª…ì£¼ê¸° ë‹¨ê³„ í™•ì¸
    const stage = determineLifecycleStage(user, date);

    // 2. ì„¸ì…˜ ìŠ¤ì¼€ì¤„ ìƒì„± (í•´ë‹¹ ë‚ ì§œ ë‚´)
    const sessions = generateSessionsForDay(user, date);

    for (const session of sessions) {
      // 3. ì²« ì´ë²¤íŠ¸ëŠ” í•­ìƒ app_start
      const events = [createEvent('app_start', user, session.start)];

      // 4. ì‹ ê·œ ìœ ì €ë©´ ì˜¨ë³´ë”© í¼ë„
      if (stage === 'new' && !user.completedEvents.has('tutorial_complete')) {
        const onboardingEvents = generateFunnelEvents(
          user,
          schema.funnels.find(f => f.name === 'onboarding'),
          session.start
        );
        events.push(...onboardingEvents);
      }

      // 5. ì¼ë°˜ ì„œë¹„ìŠ¤ ì´ë²¤íŠ¸ (ì˜ì¡´ì„± ì¤€ìˆ˜)
      const serviceEvents = generateServiceEvents(
        user,
        session,
        schema,
        aiRanges
      );
      events.push(...serviceEvents);

      // 6. ì„¸ì…˜ ì¢…ë£Œ ì´ë²¤íŠ¸
      events.push(createEvent('app_end', user, session.end));

      // 7. TE í˜•ì‹ìœ¼ë¡œ ë³€í™˜
      const teEvents = events.map(e => formatToTE(e, user, schema));

      // 8. user_set/user_add ì´ë²¤íŠ¸ ìƒì„±
      const userUpdates = generateUserUpdates(user, events);

      dailyEvents.push(...teEvents, ...userUpdates);

      // 9. ìœ ì € ìƒíƒœ ì—…ë°ì´íŠ¸
      updateUserState(user, events);
    }
  }

  // ì‹œê°„ìˆœ ì •ë ¬
  return dailyEvents.sort((a, b) =>
    new Date(a['#event_time']).getTime() - new Date(b['#event_time']).getTime()
  );
}
```

### 4. ì´ë²¤íŠ¸ ì˜ì¡´ì„± ê´€ë¦¬ì

**ëª©ì **: ì´ë²¤íŠ¸ê°€ í˜„ì‹¤ì ì¸ ìˆœì„œë¡œ ë°œìƒí•˜ë„ë¡ ë³´ì¥

**ì˜ì¡´ì„± ê·¸ë˜í”„**:
```typescript
class EventDependencyManager {
  private graph: Map<string, string[]>; // event -> required previous events

  canEventOccur(
    eventName: string,
    user: User
  ): boolean {
    const dependencies = this.graph.get(eventName) || [];

    // ëª¨ë“  ì„ í–‰ ì´ë²¤íŠ¸ê°€ ë°œìƒí–ˆëŠ”ì§€ í™•ì¸
    return dependencies.every(dep =>
      user.completedEvents.has(dep)
    );
  }

  getNextPossibleEvents(user: User): string[] {
    return Array.from(this.graph.keys()).filter(event =>
      this.canEventOccur(event, user)
    );
  }
}
```

**ì˜ˆì‹œ ì˜ì¡´ì„±**:
```
app_install (ì„¤ì¹˜)
  â†“
app_start (ì•± ì‹œì‘)
  â†“
sign_up (íšŒì›ê°€ì…)
  â†“
login (ë¡œê·¸ì¸)
  â†“
tutorial_start (íŠœí† ë¦¬ì–¼ ì‹œì‘)
  â†“
tutorial_complete (íŠœí† ë¦¬ì–¼ ì™„ë£Œ)
  â†“
stage_1_start (ìŠ¤í…Œì´ì§€ 1 ì‹œì‘)
  â†“
stage_1_clear (ìŠ¤í…Œì´ì§€ 1 í´ë¦¬ì–´)
  â†“
iap_purchase (ì¸ì•± ê²°ì œ) - ì„ íƒì 
```

### 5. ì¼ìë³„ íŒŒì¼ ìƒì„±ê¸°

**ëª©ì **: LogBus2ê°€ ìˆœì°¨ ì²˜ë¦¬í•  ìˆ˜ ìˆë„ë¡ ë‚ ì§œë³„ JSONL íŒŒì¼ ìƒì„±

**ì¶œë ¥ êµ¬ì¡°**:
```
output/
â”œâ”€â”€ runs/                          # ì‹¤í–‰ ë©”íƒ€ë°ì´í„° (LogBus2ì™€ ë¶„ë¦¬)
â”‚   â”œâ”€â”€ run_20250105_143022/
â”‚   â”‚   â”œâ”€â”€ metadata.json          # ì‹¤í–‰ ì„¤ì • ì •ë³´
â”‚   â”‚   â”œâ”€â”€ summary.json           # í†µê³„ ìš”ì•½
â”‚   â”‚   â””â”€â”€ schema.xlsx            # ì‚¬ìš©ëœ Excel ìŠ¤í‚¤ë§ˆ ë°±ì—…
â”‚   â”œâ”€â”€ run_20250105_150033/
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ run_20250106_090000/
â”‚       â””â”€â”€ ...
â””â”€â”€ data/                          # LogBus2ê°€ ì½ëŠ” ìˆœìˆ˜ ë°ì´í„°
    â”œâ”€â”€ run_20250105_143022/
    â”‚   â”œâ”€â”€ 2025-01-01.jsonl       # 1ì›” 1ì¼ ì´ë²¤íŠ¸ë§Œ
    â”‚   â”œâ”€â”€ 2025-01-02.jsonl       # 1ì›” 2ì¼ ì´ë²¤íŠ¸ë§Œ
    â”‚   â”œâ”€â”€ 2025-01-03.jsonl
    â”‚   â”œâ”€â”€ ...
    â”‚   â””â”€â”€ 2025-01-30.jsonl
    â”œâ”€â”€ run_20250105_150033/
    â”‚   â””â”€â”€ ...
    â””â”€â”€ run_20250106_090000/
        â””â”€â”€ ...
```

**í´ë” ì—­í• **:
- `output/runs/` : ì‹¤í–‰ ì •ë³´, í†µê³„, Excel ë°±ì—… (í”„ë¡ íŠ¸ì—”ë“œ ë¶„ì„ìš©)
- `output/data/` : ìˆœìˆ˜ JSONL ë°ì´í„° (LogBus2 ì „ì†¡ìš©)

**metadata.json**:
```json
{
  "runId": "run_20250105_143022",
  "createdAt": "2025-01-05T14:30:22Z",
  "config": {
    "schemaFile": "example_service_schema.xlsx",
    "dateRange": {
      "start": "2025-01-01",
      "end": "2025-01-30"
    },
    "dau": 1000,
    "newUserRatio": 0.05,
    "totalUsers": 1500
  },
  "appId": "your_app_id",
  "receiverUrl": "https://te-receiver-naver.thinkingdata.kr/"
}
```

**summary.json**:
```json
{
  "totalEvents": 150420,
  "eventsByDate": {
    "2025-01-01": 5020,
    "2025-01-02": 5100,
    ...
  },
  "eventsByType": {
    "app_start": 30000,
    "stage_clear": 25000,
    ...
  },
  "usersBySegment": {
    "whale": 75,
    "regular": 450,
    "casual": 975
  }
}
```

### 6. LogBus2 í†µí•©

**ì„¤ì • ìƒì„±**:
```typescript
function generateLogBusConfig(runId: string, appId: string, pushUrl: string) {
  // ìˆœìˆ˜ ë°ì´í„° í´ë”ë§Œ ì§€ì • (ë©”íƒ€ë°ì´í„° ì œì™¸)
  const dataPath = path.join(process.cwd(), 'output', 'data', runId);

  return {
    "datasource": [{
      "type": "file",
      "file_patterns": [`${dataPath}/*.jsonl`],  // ì˜¤ì§ JSONLë§Œ
      "app_id": appId,
      "http_compress": "gzip",
      "unit_remove": "day",
      "offset_remove": 7
    }],
    "push_url": pushUrl,
    "cpu_limit": 4
  };
}
```

### 7. íŒŒì¼ ë³´ê´€ ê´€ë¦¬ ì‹œìŠ¤í…œ

**ëª©ì **: ë””ìŠ¤í¬ ê³µê°„ ê´€ë¦¬ ë° ì˜¤ë˜ëœ íŒŒì¼ ìë™ ì •ë¦¬

**êµ¬ì„±**:
```typescript
interface FileRetentionConfig {
  dataRetentionDays: number;      // ë°ì´í„° íŒŒì¼ ë³´ê´€ ê¸°ê°„ (ê¸°ë³¸: 7ì¼)
  excelRetentionDays: number;     // Excel íŒŒì¼ ë³´ê´€ ê¸°ê°„ (ê¸°ë³¸: 30ì¼)
  autoDeleteAfterSend: boolean;   // ì „ì†¡ í›„ ì¦‰ì‹œ ì‚­ì œ (ê¸°ë³¸: false)
}

class FileRetentionManager {
  // ì˜ˆì•½ëœ ì •ë¦¬ ì‘ì—… (24ì‹œê°„ë§ˆë‹¤ ì‹¤í–‰)
  scheduleCleanup(): void {
    setInterval(() => {
      this.cleanupOldFiles();
    }, 24 * 60 * 60 * 1000);
  }

  // ë³´ê´€ ê¸°ê°„ ì´ˆê³¼ íŒŒì¼ ì‚­ì œ
  cleanupOldFiles(): void {
    const now = Date.now();

    // 1. ë°ì´í„° íŒŒì¼ ì •ë¦¬
    this.cleanupDirectory(
      'output/data/',
      this.config.dataRetentionDays,
      now
    );

    // 2. Excel íŒŒì¼ ì •ë¦¬
    this.cleanupDirectory(
      'excel-schema-generator/output/',
      this.config.excelRetentionDays,
      now
    );

    // 3. ë©”íƒ€ë°ì´í„° ì •ë¦¬
    this.cleanupDirectory(
      'output/metadata/',
      this.config.dataRetentionDays,
      now
    );
  }

  // ì „ì†¡ ì™„ë£Œ í›„ ì¦‰ì‹œ ì‚­ì œ
  deleteAfterTransmission(runId: string): void {
    if (this.config.autoDeleteAfterSend) {
      const dataDir = path.join('output/data', runId);
      fs.rmSync(dataDir, { recursive: true, force: true });
      console.log(`ğŸ—‘ï¸  Auto-deleted: ${dataDir}`);
    }
  }
}
```

**ì •ë¦¬ ì •ì±…**:
- **ë°ì´í„° íŒŒì¼** (output/data/run_XXX/): ê¸°ë³¸ 7ì¼ ë³´ê´€
- **Excel íŒŒì¼** (excel-schema-generator/output/): ê¸°ë³¸ 30ì¼ ë³´ê´€
- **ë©”íƒ€ë°ì´í„°** (output/metadata/run_XXX/): ê¸°ë³¸ 7ì¼ ë³´ê´€
- **ì „ì†¡ í›„ ì¦‰ì‹œ ì‚­ì œ**: ì„¤ì • ì‹œ ì „ì†¡ ì™„ë£Œ ì¦‰ì‹œ ë°ì´í„° íŒŒì¼ë§Œ ì‚­ì œ

**ì‹¤í–‰ ì‹œì **:
1. ì„œë²„ ì‹œì‘ ì‹œ ì´ˆê¸° ì •ë¦¬ 1íšŒ ì‹¤í–‰
2. 24ì‹œê°„ë§ˆë‹¤ ì˜ˆì•½ ì‹¤í–‰
3. ThinkingEngine ì „ì†¡ ì™„ë£Œ ì‹œ (ì˜µì…˜)

**ì¤‘ìš”**:
- LogBus2ëŠ” `output/data/run_XXX/*.jsonl` ë§Œ ì½ìŒ
- `output/runs/run_XXX/` ì˜ ë©”íƒ€ë°ì´í„°ëŠ” ì½ì§€ ì•ŠìŒ
- ì´ë ‡ê²Œ í•˜ë©´ LogBus2ê°€ JSON íŒŒì¼ì„ ì´ë²¤íŠ¸ë¡œ ì˜¤ì¸í•˜ëŠ” ë¬¸ì œ ë°©ì§€

**ìˆœì°¨ ì—…ë¡œë“œ ë³´ì¥**:
- LogBus2ëŠ” íŒŒì¼ëª… ìˆœì„œëŒ€ë¡œ ì²˜ë¦¬í•˜ë¯€ë¡œ `YYYY-MM-DD.jsonl` í˜•ì‹ì´ ìë™ìœ¼ë¡œ ë‚ ì§œìˆœ ë³´ì¥

## í”„ë¡ íŠ¸ì—”ë“œ UI êµ¬ì¡°

### í™”ë©´ íë¦„ (React State)

```typescript
type ProcessStep =
  | 'select-mode'          // í™ˆ: ëª¨ë“œ ì„ íƒ
  | 'input'                // [ìƒˆë¡œ ë§Œë“¤ê¸°] ì •ë³´ ì…ë ¥
  | 'generating-excel'     // [ìƒˆë¡œ ë§Œë“¤ê¸°] Excel ìƒì„± ì¤‘
  | 'excel-completed'      // [ìƒˆë¡œ ë§Œë“¤ê¸°] Excel ì™„ë£Œ + ë‹¤ìš´ë¡œë“œ
  | 'upload-excel'         // [ê¸°ì¡´ ì—‘ì…€] ì—…ë¡œë“œ í™”ë©´
  | 'upload-completed'     // [ê¸°ì¡´ ì—‘ì…€] ì—…ë¡œë“œ ì™„ë£Œ
  | 'combined-config'      // [ê¸°ì¡´ ì—‘ì…€] ì„¤ì • ì…ë ¥
  | 'generating-data'      // [ê³µí†µ] ë°ì´í„° ìƒì„± ì¤‘
  | 'data-completed'       // [ê³µí†µ] ë°ì´í„° ìƒì„± ì™„ë£Œ
  | 'sending-data'         // [ê³µí†µ] ThinkingEngine ì „ì†¡ ì¤‘
  | 'sent';                // [ê³µí†µ] ì „ì†¡ ì™„ë£Œ
```

### ì£¼ìš” í™”ë©´ êµ¬ì„±

#### 1. í™ˆ í™”ë©´ (select-mode)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ThinkingEngine                                [âš™ï¸ ì„¤ì •]    â”‚
â”‚  AI ê¸°ë°˜ ì´ë²¤íŠ¸ ë°ì´í„° ìƒì„± í”Œë«í¼                          â”‚
â”‚                                                              â”‚
â”‚  ë°ì´í„° ìƒì„± ë°©ë²•ì„ ì„ íƒí•˜ì„¸ìš”                              â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ ğŸ†• ìƒˆë¡œ ì‹œì‘í•˜ê¸°     â”‚    â”‚ ğŸ“ ê¸°ì¡´ ì—‘ì…€ ì‚¬ìš©   â”‚     â”‚
â”‚  â”‚                      â”‚    â”‚                      â”‚     â”‚
â”‚  â”‚ ì‚°ì—…/ì„œë¹„ìŠ¤ ì •ë³´ â†’   â”‚    â”‚ ì´ë¯¸ ë§Œë“¤ì–´ì§„       â”‚     â”‚
â”‚  â”‚ Excel ìë™ ìƒì„± â†’    â”‚    â”‚ ì—‘ì…€ ì—…ë¡œë“œ â†’       â”‚     â”‚
â”‚  â”‚ ë°ì´í„° ìƒì„±          â”‚    â”‚ ë°ì´í„° ìƒì„±         â”‚     â”‚
â”‚  â”‚                      â”‚    â”‚                      â”‚     â”‚
â”‚  â”‚ 1. ì„œë¹„ìŠ¤ ì •ë³´ ì…ë ¥  â”‚    â”‚ 1. ì—‘ì…€ íŒŒì¼ ì—…ë¡œë“œ â”‚     â”‚
â”‚  â”‚ 2. ì—‘ì…€ ìë™ ìƒì„±    â”‚    â”‚ 2. ì„¤ì • ì…ë ¥        â”‚     â”‚
â”‚  â”‚ 3. ë°ì´í„° ìƒì„±       â”‚    â”‚ 3. ë°ì´í„° ìƒì„±      â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 2. Excel ìƒì„± ì™„ë£Œ í™”ë©´ (excel-completed)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ… Excel ìŠ¤í‚¤ë§ˆ ìƒì„± ì™„ë£Œ                                  â”‚
â”‚                                                              â”‚
â”‚  Excel ìŠ¤í‚¤ë§ˆê°€ ì„±ê³µì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤!                  â”‚
â”‚  ì´ì œ ë°ì´í„° ìƒì„± ì„¤ì •ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.                      â”‚
â”‚                                                              â”‚
â”‚  ë°ì´í„° ìƒì„± ì„¤ì •                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ DAU        â”‚  â”‚ ì‹œì‘ ë‚ ì§œ  â”‚  â”‚ ì¢…ë£Œ ë‚ ì§œ  â”‚           â”‚
â”‚  â”‚ 5000       â”‚  â”‚ 2025-01-01 â”‚  â”‚ 2025-01-30 â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ ğŸ“¥ Excel ë‹¤ìš´ë¡œë“œ    â”‚  â”‚ ğŸ  í™ˆìœ¼ë¡œ            â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚         ğŸ¤– ë°ì´í„° ìƒì„± ì‹œì‘                      â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3. ë°ì´í„° ìƒì„± ì™„ë£Œ í™”ë©´ (data-completed)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ… ë°ì´í„° ìƒì„± ì™„ë£Œ                                        â”‚
â”‚                                                              â”‚
â”‚  ğŸ‰ ë°ì´í„° ìƒì„± ì™„ë£Œ!                                       â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚  â”‚ ì´ ì´ë²¤íŠ¸     â”‚  â”‚ ì´ ì‚¬ìš©ì     â”‚                      â”‚
â”‚  â”‚ 150,420       â”‚  â”‚ 1,532         â”‚                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚  â”‚ ì´ ì¼ìˆ˜       â”‚  â”‚ Run ID        â”‚                      â”‚
â”‚  â”‚ 30ì¼          â”‚  â”‚ run_XXX...    â”‚                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                                                              â”‚
â”‚  ThinkingEngineìœ¼ë¡œ ë°ì´í„°ë¥¼ ì „ì†¡í•˜ì„¸ìš”.                    â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ ğŸ  í™ˆìœ¼ë¡œ            â”‚  â”‚ ğŸ“¤ ë°ì´í„° ì „ì†¡       â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 4. ì„¤ì • ëª¨ë‹¬

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âš™ï¸ ì„¤ì •                                          [âœ• ë‹«ê¸°]  â”‚
â”‚                                                              â”‚
â”‚  Anthropic API Key:                                          â”‚
â”‚  [sk-ant-...]                                               â”‚
â”‚                                                              â”‚
â”‚  TE App ID:                                                  â”‚
â”‚  [1edbbf43c73d4b0ba513f0383714ba5d]                        â”‚
â”‚                                                              â”‚
â”‚  TE Receiver URL:                                            â”‚
â”‚  [https://te-receiver-naver.thinkingdata.kr/]              â”‚
â”‚                                                              â”‚
â”‚  â”€â”€ íŒŒì¼ ë³´ê´€ ì„¤ì • â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€          â”‚
â”‚                                                              â”‚
â”‚  ë°ì´í„° íŒŒì¼ ë³´ê´€ ê¸°ê°„ (ì¼):                                â”‚
â”‚  [7]  ìƒì„±ëœ ë°ì´í„° íŒŒì¼ì„ ìë™ìœ¼ë¡œ ì‚­ì œí•  ê¸°ê°„            â”‚
â”‚                                                              â”‚
â”‚  Excel íŒŒì¼ ë³´ê´€ ê¸°ê°„ (ì¼):                                 â”‚
â”‚  [30] ìƒì„±ëœ Excel ìŠ¤í‚¤ë§ˆ íŒŒì¼ì„ ìë™ìœ¼ë¡œ ì‚­ì œí•  ê¸°ê°„      â”‚
â”‚                                                              â”‚
â”‚  [ ] ì „ì†¡ í›„ ì¦‰ì‹œ ì‚­ì œ                                      â”‚
â”‚      ThinkingEngineìœ¼ë¡œ ì „ì†¡ ì™„ë£Œ í›„ ë°ì´í„° íŒŒì¼ì„          â”‚
â”‚      ì¦‰ì‹œ ì‚­ì œ                                              â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚  â”‚ ì·¨ì†Œ     â”‚  â”‚ ì €ì¥               â”‚                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## íŒŒì¼ êµ¬ì¡°

```
demo_data_gen/
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ ARCHITECTURE_KR.md           # ì´ íŒŒì¼
â”‚   â””â”€â”€ TECHNICAL_SPEC_KR.md
â”‚
â”œâ”€â”€ excel-schema-generator/          # Excel ìƒì„±ê¸° (í†µí•©)
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â””â”€â”€ generate.ts              # AI ê¸°ë°˜ Excel ìƒì„±
â”‚   â””â”€â”€ output/
â”‚       â””â”€â”€ generated-schemas/       # AI ìƒì„± Excel ì €ì¥ì†Œ
â”‚           â”œâ”€â”€ ì˜ˆì‹œ - ë°©ì¹˜í˜• ê²Œì„.xlsx
â”‚           â”œâ”€â”€ KartRider_taxonomy.xlsx
â”‚           â””â”€â”€ ...
â”‚
â”œâ”€â”€ data-generator/                  # ë°ì´í„° ìƒì„± ë°±ì—”ë“œ + API
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”‚   â””â”€â”€ server.ts            # Express API ì„œë²„ (í¬íŠ¸ 3001)
â”‚   â”‚   â”‚                            # ì—”ë“œí¬ì¸íŠ¸: settings, excel, generate, send
â”‚   â”‚   â”œâ”€â”€ excel/
â”‚   â”‚   â”‚   â””â”€â”€ parser.ts            # Excel íŒŒì¼ íŒŒì‹±
â”‚   â”‚   â”œâ”€â”€ ai/
â”‚   â”‚   â”‚   â””â”€â”€ client.ts            # AI API í˜¸ì¶œ (Claude)
â”‚   â”‚   â”œâ”€â”€ generators/
â”‚   â”‚   â”‚   â”œâ”€â”€ cohort-generator.ts  # ìœ ì € ì½”í˜¸íŠ¸ ìƒì„±
â”‚   â”‚   â”‚   â””â”€â”€ event-generator.ts   # ì¼ìë³„ ì´ë²¤íŠ¸ ìƒì„±
â”‚   â”‚   â”œâ”€â”€ logbus/
â”‚   â”‚   â”‚   â””â”€â”€ controller.ts        # LogBus2 ì œì–´ (daemon.json ìƒì„±)
â”‚   â”‚   â”œâ”€â”€ data-generator.ts        # ë©”ì¸ ìƒì„± ë¡œì§
â”‚   â”‚   â””â”€â”€ types/
â”‚   â”‚       â”œâ”€â”€ schema.ts            # Excel ìŠ¤í‚¤ë§ˆ íƒ€ì…
â”‚   â”‚       â””â”€â”€ user.ts              # ìœ ì € íƒ€ì…
â”‚   â”œâ”€â”€ output/                      # ìƒì„± ë°ì´í„° ì¶œë ¥
â”‚   â”‚   â”œâ”€â”€ metadata/                # ì‹¤í–‰ ë©”íƒ€ë°ì´í„°
â”‚   â”‚   â”‚   â””â”€â”€ run_XXX/
â”‚   â”‚   â”‚       â”œâ”€â”€ metadata.json
â”‚   â”‚   â”‚       â””â”€â”€ summary.json
â”‚   â”‚   â””â”€â”€ data/                    # LogBus2 ì „ì†¡ìš© JSONL
â”‚   â”‚       â””â”€â”€ run_XXX/
â”‚   â”‚           â”œâ”€â”€ 2025-01-01.jsonl
â”‚   â”‚           â”œâ”€â”€ 2025-01-02.jsonl
â”‚   â”‚           â””â”€â”€ ...
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ tsconfig.json
â”‚
â”œâ”€â”€ frontend/                        # í”„ë¡ íŠ¸ì—”ë“œ (Next.js 14)
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â””â”€â”€ app/
â”‚   â”‚       â”œâ”€â”€ page.tsx             # ë©”ì¸ UI (ë‹¨ì¼ í˜ì´ì§€)
â”‚   â”‚       â”‚                        # - ëª¨ë“œ ì„ íƒ (ìƒˆë¡œ ë§Œë“¤ê¸°/ì—‘ì…€ ì—…ë¡œë“œ)
â”‚   â”‚       â”‚                        # - Excel ìƒì„±/ì—…ë¡œë“œ
â”‚   â”‚       â”‚                        # - ë°ì´í„° ìƒì„±
â”‚   â”‚       â”‚                        # - ThinkingEngine ì „ì†¡
â”‚   â”‚       â”œâ”€â”€ layout.tsx
â”‚   â”‚       â””â”€â”€ globals.css
â”‚   â”œâ”€â”€ next.config.mjs              # API í”„ë¡ì‹œ ì„¤ì • (3000â†’3001)
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ tsconfig.json
â”‚
â”œâ”€â”€ uploads/                         # ì—…ë¡œë“œëœ Excel ì„ì‹œ ì €ì¥
â”‚   â””â”€â”€ timestamp_filename.xlsx
â”‚
â”œâ”€â”€ logbus 2/                        # LogBus2 ë°”ì´ë„ˆë¦¬
â”‚   â”œâ”€â”€ logbus                       # ì‹¤í–‰ íŒŒì¼
â”‚   â””â”€â”€ conf/
â”‚       â””â”€â”€ daemon.json              # ëŸ°íƒ€ì„ ìƒì„± (controller.ts)
â”‚
â”œâ”€â”€ .env                             # í™˜ê²½ ë³€ìˆ˜
â”‚   # ANTHROPIC_API_KEY=sk-ant-...
â”‚   # TE_APP_ID=...
â”‚   # TE_RECEIVER_URL=https://te-receiver-naver.thinkingdata.kr/
â”‚   # DATA_RETENTION_DAYS=7
â”‚   # EXCEL_RETENTION_DAYS=30
â”‚   # AUTO_DELETE_AFTER_SEND=false
â”‚
â””â”€â”€ package.json                     # ë£¨íŠ¸ ìŠ¤í¬ë¦½íŠ¸
    # npm run api      â†’ ë°±ì—”ë“œ API ì„œë²„ (3001)
    # npm run frontend â†’ í”„ë¡ íŠ¸ì—”ë“œ ì„œë²„ (3000)
```

### ì£¼ìš” ë””ë ‰í† ë¦¬ ì—­í• 

#### `/data-generator/output/`
- **`metadata/`**: ì‹¤í–‰ ì •ë³´, í†µê³„ (í”„ë¡ íŠ¸ì—”ë“œ í‘œì‹œìš©)
- **`data/`**: ìˆœìˆ˜ JSONL ë°ì´í„° (LogBus2 ì „ì†¡ìš©)

#### `/excel-schema-generator/output/`
- AIê°€ ìƒì„±í•œ Excel ìŠ¤í‚¤ë§ˆ íŒŒì¼ ì €ì¥
- ë‹¤ìš´ë¡œë“œ ë° ì¬ì‚¬ìš© ê°€ëŠ¥

#### `/uploads/`
- ì‚¬ìš©ìê°€ ì—…ë¡œë“œí•œ Excel ì„ì‹œ ì €ì¥ì†Œ
- íŒŒì‹± í›„ ì‚­ì œ ë˜ëŠ” ë³´ê´€

## ì‹œìŠ¤í…œ í†µí•© ë° ë°ì´í„° íë¦„

### ì „ì²´ ë°ì´í„° íŒŒì´í”„ë¼ì¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [1ë‹¨ê³„] í”„ë¡ íŠ¸ì—”ë“œ (localhost:3000)                       â”‚
â”‚  - ì‚¬ìš©ì ì…ë ¥ ìˆ˜ì§‘                                        â”‚
â”‚  - UI ìƒíƒœ ê´€ë¦¬ (React State)                              â”‚
â”‚  - 2ì´ˆë§ˆë‹¤ ì§„í–‰ ìƒíƒœ í´ë§                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â”‚ HTTP Request (í”„ë¡ì‹œ: 3000 â†’ 3001)
              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [2ë‹¨ê³„] API ì„œë²„ (localhost:3001)                         â”‚
â”‚  - Express REST API                                        â”‚
â”‚  - ë©€í‹°íŒŒíŠ¸ íŒŒì¼ ì—…ë¡œë“œ (Multer)                          â”‚
â”‚  - ì§„í–‰ ìƒíƒœ ì €ì¥ (Map<runId, Progress>)                  â”‚
â”‚  - ì„¤ì • ê´€ë¦¬ (.env íŒŒì¼)                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â”‚ Direct function call
              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [3ë‹¨ê³„] ë°ì´í„° ìƒì„± ì—”ì§„                                  â”‚
â”‚  - Excel íŒŒì‹± â†’ ìŠ¤í‚¤ë§ˆ ê°ì²´                               â”‚
â”‚  - AI í˜¸ì¶œ (Claude) â†’ ì´ë²¤íŠ¸ ì˜ì¡´ì„± + ë°ì´í„° ë²”ìœ„        â”‚
â”‚  - ìœ ì € ì½”í˜¸íŠ¸ ìƒì„± â†’ ì„¸ê·¸ë¨¼íŠ¸ë³„ ìœ ì € í’€                  â”‚
â”‚  - ì¼ìë³„ ì´ë²¤íŠ¸ ìƒì„± â†’ JSONL íŒŒì¼ ì €ì¥                   â”‚
â”‚  - ì§„í–‰ ìƒíƒœ ì½œë°± â†’ API ì„œë²„ â†’ í”„ë¡ íŠ¸ì—”ë“œ                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â”‚ File system (JSONL íŒŒì¼)
              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [4ë‹¨ê³„] LogBus2 í†µí•©                                       â”‚
â”‚  - daemon.json ìë™ ìƒì„± (gzip ì••ì¶•)                       â”‚
â”‚  - LogBus2 í”„ë¡œì„¸ìŠ¤ ì‹œì‘ (exec)                           â”‚
â”‚  - íŒŒì¼ ì—…ë¡œë“œ ëª¨ë‹ˆí„°ë§ (progress ëª…ë ¹)                   â”‚
â”‚  - ì „ì†¡ ì™„ë£Œ í›„ LogBus2 ì¢…ë£Œ                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â”‚ HTTPS POST (gzip compressed)
              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [5ë‹¨ê³„] ThinkingEngine                                    â”‚
â”‚  - ì´ë²¤íŠ¸ ìˆ˜ì‹  ë° ì €ì¥                                     â”‚
â”‚  - ë°ì´í„° ë¶„ì„ ëŒ€ì‹œë³´ë“œ                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### API í˜¸ì¶œ ì‹œí€€ìŠ¤

#### ìƒˆë¡œ ë§Œë“¤ê¸° ëª¨ë“œ

```
í”„ë¡ íŠ¸ì—”ë“œ                API ì„œë²„                  ë°ì´í„° ìƒì„± ì—”ì§„
    â”‚
    â”‚ POST /api/settings
    â”‚ (API Key, APP_ID ì €ì¥)
    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>
    â”‚                     .env íŒŒì¼ ì—…ë°ì´íŠ¸
    â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    â”‚
    â”‚ [ì‚¬ìš©ì: ì •ë³´ ì…ë ¥ ì™„ë£Œ]
    â”‚
    â”‚ ğŸ“Š Excel ìƒì„± ë²„íŠ¼ í´ë¦­
    â”‚ (ì‹œë‚˜ë¦¬ì˜¤, ì‚°ì—…, íŠ¹ì§•)
    â”‚
    â”‚ GET /api/excel/list
    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>
    â”‚                     íŒŒì¼ ì‹œìŠ¤í…œ ìŠ¤ìº”
    â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    â”‚ ìµœì‹  Excel ê²½ë¡œ ë°˜í™˜
    â”‚
    â”‚ [Excel ë‹¤ìš´ë¡œë“œ]
    â”‚ GET /api/excel/download/:filename
    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>
    â”‚                     res.download()
    â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    â”‚ íŒŒì¼ ë‹¤ìš´ë¡œë“œ
    â”‚
    â”‚ [ì‚¬ìš©ì: DAU, ë‚ ì§œ ì…ë ¥]
    â”‚
    â”‚ ğŸ¤– ë°ì´í„° ìƒì„± ì‹œì‘
    â”‚ POST /api/generate/start
    â”‚ {excelPath, dau, dates...}
    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>
    â”‚                     DataGenerator.generate()
    â”‚                     â”‚
    â”‚                     â”‚ Excel íŒŒì‹±
    â”‚                     â”‚ AI ë¶„ì„
    â”‚                     â”‚ ìœ ì € ìƒì„±
    â”‚                     â”‚ ì´ë²¤íŠ¸ ìƒì„±
    â”‚                     â”‚   (500ms ë”œë ˆì´)
    â”‚                     â”‚ JSONL ì €ì¥
    â”‚ runId ë°˜í™˜
    â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    â”‚
    â”‚ [2ì´ˆë§ˆë‹¤ í´ë§ ì‹œì‘]
    â”‚ GET /api/generate/status/:runId
    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>
    â”‚                     progressMap.get(runId)
    â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    â”‚ {status, progress, message}
    â”‚
    â”‚ [ìƒì„± ì™„ë£Œ]
    â”‚
    â”‚ ğŸ“¤ ì „ì†¡ ì‹œì‘
    â”‚ POST /api/send-data/:runId
    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>
    â”‚                     LogBus2Controller
    â”‚                     â”‚
    â”‚                     â”‚ daemon.json ìƒì„±
    â”‚                     â”‚ logbus start
    â”‚                     â”‚ logbus progress (3ì´ˆ í´ë§)
    â”‚                     â”‚ logbus stop
    â”‚                     â”‚
    â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    â”‚ ì „ì†¡ ì™„ë£Œ
    â”‚
    â”‚ [íŒŒì¼ ì •ë¦¬ (ìë™)]
    â”‚                     FileRetentionManager
    â”‚                     - ì¦‰ì‹œ ì‚­ì œ ë˜ëŠ”
    â”‚                     - ë³´ê´€ ê¸°ê°„ ì ìš©
```

#### ê¸°ì¡´ ì—‘ì…€ ì‚¬ìš© ëª¨ë“œ

```
í”„ë¡ íŠ¸ì—”ë“œ                API ì„œë²„
    â”‚
    â”‚ ğŸ“ íŒŒì¼ ì„ íƒ (ë“œë˜ê·¸ ì•¤ ë“œë¡­)
    â”‚
    â”‚ POST /api/excel/upload
    â”‚ multipart/form-data
    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>
    â”‚                     Multer íŒŒì¼ ì €ì¥
    â”‚                     Excel íŒŒì‹±
    â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    â”‚ {path, preview}
    â”‚
    â”‚ [ì—…ë¡œë“œ ì™„ë£Œ í™”ë©´]
    â”‚ ì´ë²¤íŠ¸/ì†ì„± ìˆ˜ í‘œì‹œ
    â”‚
    â”‚ [ì‚¬ìš©ì: ì„¤ì • ì…ë ¥]
    â”‚
    â”‚ ğŸ¤– ë°ì´í„° ìƒì„± ì‹œì‘
    â”‚ POST /api/generate/start
    â”‚ {excelPath=uploaded, ...}
    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>
    â”‚
    â”‚ (ì´í›„ ë™ì¼)
```

## ë°ì´í„° ìƒì„± íë¦„ ìƒì„¸

### Phase 1: Excel íŒŒì¼ ì½ê¸° (í”„ë¡ íŠ¸ì—”ë“œ)
```
ì™¸ë¶€ í”„ë¡œê·¸ë¨ì´ ìƒì„±í•œ Excel íŒŒì¼
  â†“ (excel-schema-generator/output/ ì—ì„œ íŒŒì¼ ì„ íƒ)
  â†“
Excel íŒŒì¼ ì½ê¸° (xlsx ë¼ì´ë¸ŒëŸ¬ë¦¬)
  â†“
ParsedSchema {
  events: [{name: "app_start", category: "system", ...}, ...],
  properties: [{name: "stage_id", type: "string", ...}, ...],
  userSegments: [{name: "whale", percentage: 5, ...}, ...],
  funnels: [{name: "onboarding", events: [...], ...}, ...],
  dependencies: null  // ì•„ì§ AIê°€ ì¶”ë¡ í•˜ì§€ ì•ŠìŒ
}
```

### Phase 2: AI ë¶„ì„ ë° ë²”ìœ„ ìƒì„± (ì„œë²„ API)
```
AI ì…ë ¥ {
  // Excelì—ì„œ ì½ì€ ì •ë³´
  events: ["app_start", "tutorial_start", "purchase_complete", ...],
  properties: {
    "product_id": { type: "string", examples: ["prod_001", "prod_002"] },
    "amount": { type: "number", examples: [1000, 5000, 10000] },
    "user_name": { type: "string", examples: [] },  // Faker.jsë¡œ ìƒì„±
    "address": { type: "string", examples: [] }      // Faker.jsë¡œ ìƒì„±
  },

  // í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ì…ë ¥ë°›ì€ ì •ë³´
  userInputs: {
    scenario: "ì‹ ê·œ ìœ ì € ì˜¨ë³´ë”©ì— ì§‘ì¤‘í•˜ê³ , ì²« ê²°ì œê¹Œì§€ì˜ í¼ë„ì„ ìµœì í™”í•˜ê³  ì‹¶ìŠµë‹ˆë‹¤...",
    dau: 1000,
    industry: "ì»¤ë¨¸ìŠ¤",
    notes: "ì¼ë³¸ íƒ€ê²Ÿ ì´ì»¤ë¨¸ìŠ¤, íŒ¨ì…˜/ë·°í‹° ì¤‘ì‹¬",
    dateRange: { start: "2025-01-01", end: "2025-01-30" }
  }
}

**ì¤‘ìš”**: AIëŠ” ë‹¤ìŒì„ ì¸ì‹:
- user_name, address ë“±ì€ Faker.jsê°€ êµ­ê°€ë³„ ë¡œì¼€ì¼ë¡œ ìë™ ìƒì„±
- AIëŠ” product_id, amount ë“± ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì¤‘ì‹¬ ë²”ìœ„ë§Œ ì •ì˜
- êµ­ê°€ ì„¤ì •(ì¼ë³¸)ì— ë”°ë¼ Faker.jsê°€ ì¼ë³¸ì–´ ì´ë¦„, ì¼ë³¸ ì£¼ì†Œ ìƒì„±
  â†“ (Claude/OpenAI API í˜¸ì¶œ)
  â†“
AI ì¶œë ¥ {
  // 1. ìœ ì € ì„¸ê·¸ë¨¼íŠ¸ ë¹„ìœ¨ ìë™ ê²°ì •
  userSegments: {
    new: { ratio: 0.10, description: "ì‹ ê·œ ìœ ì €" },
    core: { ratio: 0.15, description: "í•µì‹¬ ìœ ì € (ê³ ê³¼ê¸ˆ, ê³ ì°¸ì—¬)" },
    regular: { ratio: 0.50, description: "ì¼ë°˜ ìœ ì €" },
    light: { ratio: 0.25, description: "ë¼ì´íŠ¸ ìœ ì € (ì €ì°¸ì—¬)" }
  },

  // 2. ì´ë²¤íŠ¸ ì˜ì¡´ì„± ì¶”ë¡ 
  dependencies: {
    "app_start": [],
    "tutorial_start": ["app_start"],
    "tutorial_complete": ["tutorial_start"],
    "stage_1_start": ["tutorial_complete"],
    "stage_1_clear": ["stage_1_start"],
    "iap_purchase": ["tutorial_complete"]  // ì„ íƒì 
  },

  // 3. ì„¸ê·¸ë¨¼íŠ¸ë³„ ë°ì´í„° ë²”ìœ„ ìƒì„±
  dataRanges: {
    "stage_clear": {
      "stage_id": {
        "core": { values: ["s5-1", "s5-2", ... "s10-20"], weights: [...] },
        "regular": { values: ["s2-1", ... "s5-20"], weights: [...] },
        "light": { values: ["s1-1", ... "s3-10"], weights: [...] }
      },
      "rewards_gold": {
        "core": { min: 500, max: 5000, distribution: "normal" },
        "regular": { min: 100, max: 1000, distribution: "normal" },
        "light": { min: 50, max: 500, distribution: "normal" }
      }
    }
  },

  // 4. í˜„ì‹¤ì ì¸ ì‹œê°„ ê°„ê²© ì •ì˜
  timingPatterns: {
    "tutorial_start â†’ tutorial_complete": { min: 120, max: 300, unit: "seconds" },
    "app_start â†’ first_event": { min: 2, max: 10, unit: "seconds" },
    "stage_start â†’ stage_clear": { min: 30, max: 180, unit: "seconds" }
  },

  // 5. ì„¸ì…˜ íŒ¨í„´ ì •ì˜
  sessionPatterns: {
    "new": { avgSessionsPerDay: 3, avgDuration: 30, peakHours: [12, 20, 22] },
    "core": { avgSessionsPerDay: 5, avgDuration: 45, peakHours: [9, 12, 18, 21] },
    "regular": { avgSessionsPerDay: 2, avgDuration: 20, peakHours: [12, 20] },
    "light": { avgSessionsPerDay: 0.5, avgDuration: 10, peakHours: [21] }
  }
}
```

### Phase 3: ìœ ì € ì½”í˜¸íŠ¸ ìƒì„± (í”„ë¡ íŠ¸ì—”ë“œ)
```
AI ê²°ì • ì„¸ê·¸ë¨¼íŠ¸ ë¹„ìœ¨:
  ì‹ ê·œ 10%, í•µì‹¬ 15%, ì¼ë°˜ 50%, ë¼ì´íŠ¸ 25%

DAU: 1,000ëª…
ë‚ ì§œ ë²”ìœ„: 2025-01-01 ~ 2025-01-30

  â†“ (AI ë¹„ìœ¨ì— ë”°ë¼ ìœ ì € ìƒì„±)
  â†“
ì´ ìœ ì € í’€ ìƒì„± (ì„¤ì¹˜ì¼ ë¶„ì‚°):
  ì‹ ê·œ: 153ëª… (30ì¼ê°„ ë¶„ì‚° ì„¤ì¹˜)
  í•µì‹¬: 230ëª…
  ì¼ë°˜: 766ëª…
  ë¼ì´íŠ¸: 383ëª…

  â†“ (ë‚ ì§œë³„ í™œì„± ìœ ì € ë°°ì¹˜)
  â†“
Map<Date, User[]> {
  "2025-01-01": [
    { id: "user_0001", installDate: "2025-01-01", segment: "new", stage: "new", ... },
    { id: "user_0002", installDate: "2024-12-20", segment: "core", stage: "active", ... },
    { id: "user_0003", installDate: "2024-12-15", segment: "regular", stage: "returning", ... },
    ...
    (ì´ 1,000ëª…: DAU ìœ ì§€, ì„¸ê·¸ë¨¼íŠ¸ë³„ í™œë™ íŒ¨í„´ ì ìš©)
  ],
  "2025-01-02": [
    { id: "user_0005", installDate: "2025-01-02", segment: "new", stage: "new", ... },
    { id: "user_0001", installDate: "2025-01-01", segment: "new", stage: "active", ... },
    ...
    (ì´ 1,000ëª…)
  ],
  ...
}
```

### Phase 4: ì¼ìë³„ ì´ë²¤íŠ¸ ìƒì„± (í”„ë¡ íŠ¸ì—”ë“œ)
```
FOR EACH ë‚ ì§œ in ë²”ìœ„:
  FOR EACH ìœ ì € in cohorts[ë‚ ì§œ]:
    1. ìƒëª…ì£¼ê¸° ë‹¨ê³„ í™•ì¸ (new/active/returning)
    2. ì„¸ì…˜ ìŠ¤ì¼€ì¤„ ìƒì„± (í•˜ë£¨ ì¤‘ ëª‡ ë²ˆ ì ‘ì†)

    FOR EACH ì„¸ì…˜:
      3. app_start ì´ë²¤íŠ¸
      4. ì‹ ê·œ ìœ ì € â†’ ì˜¨ë³´ë”© í¼ë„ (ì˜ì¡´ì„± ì²´í¬)
      5. ì„œë¹„ìŠ¤ ì´ë²¤íŠ¸ ìƒì„± (ê°€ëŠ¥í•œ ì´ë²¤íŠ¸ë§Œ)
      6. app_end ì´ë²¤íŠ¸
      7. TE í˜•ì‹ìœ¼ë¡œ ë³€í™˜
      8. user_set/user_add ìƒì„±

  9. í•´ë‹¹ ë‚ ì§œ ì´ë²¤íŠ¸ ì‹œê°„ìˆœ ì •ë ¬
  10. JSONL íŒŒì¼ ì €ì¥: output/run_XXX/YYYY-MM-DD.jsonl
```

### Phase 5: íŒŒì¼ ì‘ì„± ì˜ˆì‹œ
```javascript
// output/data/run_20250105_143022/2025-01-01.jsonl (LogBus2ê°€ ì½ìŒ)
{"#type":"track","#event_name":"app_start","#account_id":"user_0001","#event_time":"2025-01-01 09:15:23.123",...}
{"#type":"track","#event_name":"sign_up","#account_id":"user_0001","#event_time":"2025-01-01 09:15:45.456",...}
{"#type":"user_set","#account_id":"user_0001","#event_time":"2025-01-01 09:15:45.456","properties":{"user_type":"new"}}
{"#type":"track","#event_name":"tutorial_start","#account_id":"user_0001","#event_time":"2025-01-01 09:16:12.789",...}
...

// output/runs/run_20250105_143022/metadata.json (ë©”íƒ€ë°ì´í„°)
{
  "runId": "run_20250105_143022",
  "createdAt": "2025-01-05T14:30:22Z",
  "config": {...},
  "aiGenerated": {
    "dependencies": {...},
    "dataRanges": {...}
  }
}

// output/runs/run_20250105_143022/summary.json (í†µê³„)
{
  "totalEvents": 150420,
  "eventsByDate": {...},
  "funnelConversions": {...}
}

// output/runs/run_20250105_143022/schema.xlsx (ì‚¬ìš©ëœ ìŠ¤í‚¤ë§ˆ ë°±ì—…)
```

## í•µì‹¬ ì•Œê³ ë¦¬ì¦˜

### 1. ì´ë²¤íŠ¸ ì˜ì¡´ì„± ê²€ì¦
```typescript
class DependencyManager {
  canFireEvent(eventName: string, user: User): boolean {
    const deps = this.dependencies.get(eventName) || [];

    // ëª¨ë“  í•„ìˆ˜ ì„ í–‰ ì´ë²¤íŠ¸ ì™„ë£Œ í™•ì¸
    for (const requiredEvent of deps) {
      if (!user.completedEvents.has(requiredEvent)) {
        return false;
      }
    }

    // ë™ì‹œ ë°œìƒ ë¶ˆê°€ ì´ë²¤íŠ¸ í™•ì¸
    const conflicts = this.conflicts.get(eventName) || [];
    for (const conflict of conflicts) {
      if (user.completedEvents.has(conflict)) {
        return false;
      }
    }

    return true;
  }
}
```

### 2. í˜„ì‹¤ì ì¸ ì„¸ì…˜ ìƒì„±
```typescript
function generateSessionsForDay(
  user: User,
  date: Date,
  segment: UserSegment
): Session[] {
  const sessions: Session[] = [];
  const sessionCount = poissonRandom(segment.avg_sessions_per_day);

  for (let i = 0; i < sessionCount; i++) {
    // ìœ ì € íƒ€ì…ë³„ ì„ í˜¸ ì‹œê°„ëŒ€
    const preferredHours = {
      whale: [9, 12, 18, 21],      // ì•„ì¹¨, ì ì‹¬, ì €ë…, ë°¤
      regular: [12, 20],            // ì ì‹¬, ì €ë…
      casual: [21]                  // ë°¤ì—ë§Œ
    }[user.segment];

    const hour = weightedRandom(preferredHours);
    const minute = randomInt(0, 59);

    const start = new Date(date);
    start.setHours(hour, minute, randomInt(0, 59));

    const duration = normalRandom(
      segment.avg_session_duration_min,
      segment.avg_session_duration_min * 0.3 // í‘œì¤€í¸ì°¨ 30%
    );

    sessions.push({
      start,
      duration,
      end: new Date(start.getTime() + duration * 60 * 1000)
    });
  }

  return sessions.sort((a, b) => a.start.getTime() - b.start.getTime());
}
```

### 3. ìœ ì € ìƒëª…ì£¼ê¸° ê²°ì •
```typescript
function determineLifecycleStage(user: User, currentDate: Date): LifecycleStage {
  const daysSinceInstall = daysBetween(user.installDate, currentDate);
  const daysSinceLastActive = daysBetween(user.lastActiveDate, currentDate);

  if (daysSinceInstall === 0) {
    return 'new';  // ì„¤ì¹˜ ë‹¹ì¼
  }

  if (daysSinceLastActive === 1) {
    return 'active';  // ë§¤ì¼ ì ‘ì†
  }

  if (daysSinceLastActive >= 2 && daysSinceLastActive <= 7) {
    return 'returning';  // ë©°ì¹ ë§Œì— ë³µê·€
  }

  if (daysSinceLastActive >= 8 && daysSinceLastActive <= 30) {
    return 'dormant';  // íœ´ë©´
  }

  return 'churned';  // ì´íƒˆ
}
```

## ì„±ëŠ¥ ê³ ë ¤ì‚¬í•­

### ìµœì í™” ëª©í‘œ
- **1,000 DAU x 30ì¼**: 10ì´ˆ ì´ë‚´ ìƒì„±
- **10,000 DAU x 30ì¼**: 60ì´ˆ ì´ë‚´ ìƒì„±
- **ë©”ëª¨ë¦¬**: 100,000 ì´ë²¤íŠ¸ë‹¹ 100MB ì´í•˜

### ìµœì í™” ì „ëµ
1. **ë‚ ì§œë³„ ì²­í¬ ì²˜ë¦¬**: í•œ ë²ˆì— ëª¨ë“  ë‚ ì§œ ìƒì„±í•˜ì§€ ì•Šê³  í•˜ë£¨ì”©
2. **Web Worker ì‚¬ìš©**: ë³‘ë ¬ë¡œ ì—¬ëŸ¬ ë‚ ì§œ ë™ì‹œ ìƒì„±
3. **ìŠ¤íŠ¸ë¦¬ë° íŒŒì¼ ì‘ì„±**: ë©”ëª¨ë¦¬ì— ëª¨ë‘ ì €ì¥í•˜ì§€ ì•Šê³  ì¦‰ì‹œ íŒŒì¼ ì‘ì„±
4. **AI ë²”ìœ„ ìºì‹±**: ë™ì¼ ìŠ¤í‚¤ë§ˆì— ëŒ€í•´ ì¬ì‚¬ìš©

## ê²€ì¦ ì²´í¬ë¦¬ìŠ¤íŠ¸

ìƒì„±ëœ ë°ì´í„°ê°€ í˜„ì‹¤ì ì¸ì§€ í™•ì¸:

### âœ… ì´ë²¤íŠ¸ ìˆœì„œ
- [ ] app_install â†’ app_start â†’ sign_up â†’ login ìˆœì„œ ë³´ì¥
- [ ] tutorial_start ì „ì— sign_up ì™„ë£Œ
- [ ] stage_N_clear ì „ì— stage_N_start ë°œìƒ
- [ ] ëª¨ë“  ì„¸ì…˜ì´ app_startë¡œ ì‹œì‘, app_endë¡œ ì¢…ë£Œ

### âœ… ìœ ì € ìƒëª…ì£¼ê¸°
- [ ] ì‹ ê·œ ìœ ì €ëŠ” ì²«ë‚  ì˜¨ë³´ë”© í¼ë„ ì§„í–‰
- [ ] ì‹ ê·œ ìœ ì € ë¹„ìœ¨ì´ ì„¤ì •ê°’ê³¼ ì¼ì¹˜ (Â±5%)
- [ ] D1, D7, D30 ë¦¬í…ì…˜ì´ ì •ì˜ëœ ë²”ìœ„ ë‚´

### âœ… ì‹œê°„ ë¶„í¬
- [ ] ì´ë²¤íŠ¸ê°€ ë‚ ì§œë³„ë¡œ ê· ë“± ë¶„ì‚°
- [ ] ì„¸ì…˜ì´ í˜„ì‹¤ì ì¸ ì‹œê°„ëŒ€ì— ë°œìƒ
- [ ] ì„¸ì…˜ ê°„ ê°„ê²©ì´ ìì—°ìŠ¤ëŸ¬ì›€

### âœ… ë°ì´í„° í’ˆì§ˆ
- [ ] ëª¨ë“  í•„ìˆ˜ ì‹œìŠ¤í…œ í•„ë“œ ì¡´ì¬
- [ ] ì´ë²¤íŠ¸ ì‹œê°„ì´ ì‹œë®¬ë ˆì´ì…˜ ë²”ìœ„ ë‚´
- [ ] ì†ì„± ê°’ì´ ì •ì˜ëœ ë°ì´í„° íƒ€ì…ê³¼ ì¼ì¹˜
- [ ] JSONL íŒŒì¼ í˜•ì‹ ìœ íš¨

## ì°¸ê³  ìë£Œ

- **ThinkingEngine ë¬¸ì„œ**: `docs/ThinkingEngine.md`
- **LogBus2 ê°€ì´ë“œ**: `docs/logbus2.md`
- **í”„ë¦¬ì…‹ ì†ì„±**: `docs/Preset Properties.md`
